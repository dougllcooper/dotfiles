var $n=Object.defineProperty;var dn=Object.getOwnPropertySymbols;var On=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable;var Sn=(b,H,B)=>H in b?$n(b,H,{enumerable:!0,configurable:!0,writable:!0,value:B}):b[H]=B,pn=(b,H)=>{for(var B in H||(H={}))On.call(H,B)&&Sn(b,B,H[B]);if(dn)for(var B of dn(H))An.call(H,B)&&Sn(b,B,H[B]);return b};var Tn=(b,H)=>{var B={};for(var J in b)On.call(b,J)&&H.indexOf(J)<0&&(B[J]=b[J]);if(b!=null&&dn)for(var J of dn(b))H.indexOf(J)<0&&An.call(b,J)&&(B[J]=b[J]);return B};var D=(b,H,B)=>(Sn(b,typeof H!="symbol"?H+"":H,B),B);const Ln=function(){const H=document.createElement("link").relList;if(H&&H.supports&&H.supports("modulepreload"))return;for(const F of document.querySelectorAll('link[rel="modulepreload"]'))J(F);new MutationObserver(F=>{for(const V of F)if(V.type==="childList")for(const y of V.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&J(y)}).observe(document,{childList:!0,subtree:!0});function B(F){const V={};return F.integrity&&(V.integrity=F.integrity),F.referrerpolicy&&(V.referrerPolicy=F.referrerpolicy),F.crossorigin==="use-credentials"?V.credentials="include":F.crossorigin==="anonymous"?V.credentials="omit":V.credentials="same-origin",V}function J(F){if(F.ep)return;F.ep=!0;const V=B(F);fetch(F.href,V)}};Ln();var fn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},En={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(b,H){(function(B,J){b.exports=J()})(self,function(){return(()=>{var B={227:(y,c,_)=>{var E=_(155);c.formatArgs=function($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const z="color: "+this.color;$.splice(1,0,z,"color: inherit");let h=0,u=0;$[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(u=h))}),$.splice(u,0,z)},c.save=function($){try{$?c.storage.setItem("debug",$):c.storage.removeItem("debug")}catch{}},c.load=function(){let $;try{$=c.storage.getItem("debug")}catch{}return!$&&E!==void 0&&"env"in E&&($=E.env.DEBUG),$},c.useColors=function(){return!(typeof window=="undefined"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator=="undefined"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function(){try{return localStorage}catch{}}(),c.destroy=(()=>{let $=!1;return()=>{$||($=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),y.exports=_(447)(c);const{formatters:x}=y.exports;x.j=function($){try{return JSON.stringify($)}catch(z){return"[UnexpectedJSONParseError]: "+z.message}}},447:(y,c,_)=>{y.exports=function(E){function x(h){let u,m=null;function g(...M){if(!g.enabled)return;const G=g,W=Number(new Date),Y=W-(u||W);G.diff=Y,G.prev=u,G.curr=W,u=W,M[0]=x.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let C=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(L,i)=>{if(L==="%%")return"%";C++;const s=x.formatters[i];if(typeof s=="function"){const f=M[C];L=s.call(G,f),M.splice(C,1),C--}return L}),x.formatArgs.call(G,M),(G.log||x.log).apply(G,M)}return g.namespace=h,g.useColors=x.useColors(),g.color=x.selectColor(h),g.extend=$,g.destroy=x.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m===null?x.enabled(h):m,set:M=>{m=M}}),typeof x.init=="function"&&x.init(g),g}function $(h,u){const m=x(this.namespace+(u===void 0?":":u)+h);return m.log=this.log,m}function z(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return x.debug=x,x.default=x,x.coerce=function(h){return h instanceof Error?h.stack||h.message:h},x.disable=function(){const h=[...x.names.map(z),...x.skips.map(z).map(u=>"-"+u)].join(",");return x.enable(""),h},x.enable=function(h){let u;x.save(h),x.names=[],x.skips=[];const m=(typeof h=="string"?h:"").split(/[\s,]+/),g=m.length;for(u=0;u<g;u++)m[u]&&((h=m[u].replace(/\*/g,".*?"))[0]==="-"?x.skips.push(new RegExp("^"+h.substr(1)+"$")):x.names.push(new RegExp("^"+h+"$")))},x.enabled=function(h){if(h[h.length-1]==="*")return!0;let u,m;for(u=0,m=x.skips.length;u<m;u++)if(x.skips[u].test(h))return!1;for(u=0,m=x.names.length;u<m;u++)if(x.names[u].test(h))return!0;return!1},x.humanize=_(824),x.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(E).forEach(h=>{x[h]=E[h]}),x.names=[],x.skips=[],x.formatters={},x.selectColor=function(h){let u=0;for(let m=0;m<h.length;m++)u=(u<<5)-u+h.charCodeAt(m),u|=0;return x.colors[Math.abs(u)%x.colors.length]},x.enable(x.load()),x}},856:function(y){y.exports=function(){var c=Object.hasOwnProperty,_=Object.setPrototypeOf,E=Object.isFrozen,x=Object.getPrototypeOf,$=Object.getOwnPropertyDescriptor,z=Object.freeze,h=Object.seal,u=Object.create,m=typeof Reflect!="undefined"&&Reflect,g=m.apply,M=m.construct;g||(g=function(P,N,T){return P.apply(N,T)}),z||(z=function(P){return P}),h||(h=function(P){return P}),M||(M=function(P,N){return new(Function.prototype.bind.apply(P,[null].concat(function(T){if(Array.isArray(T)){for(var at=0,st=Array(T.length);at<T.length;at++)st[at]=T[at];return st}return Array.from(T)}(N))))});var G,W=X(Array.prototype.forEach),Y=X(Array.prototype.pop),C=X(Array.prototype.push),L=X(String.prototype.toLowerCase),i=X(String.prototype.match),s=X(String.prototype.replace),f=X(String.prototype.indexOf),j=X(String.prototype.trim),Z=X(RegExp.prototype.test),tt=(G=TypeError,function(){for(var P=arguments.length,N=Array(P),T=0;T<P;T++)N[T]=arguments[T];return M(G,N)});function X(P){return function(N){for(var T=arguments.length,at=Array(T>1?T-1:0),st=1;st<T;st++)at[st-1]=arguments[st];return g(P,N,at)}}function R(P,N){_&&_(P,null);for(var T=N.length;T--;){var at=N[T];if(typeof at=="string"){var st=L(at);st!==at&&(E(N)||(N[T]=st),at=st)}P[at]=!0}return P}function pt(P){var N=u(null),T=void 0;for(T in P)g(c,P,[T])&&(N[T]=P[T]);return N}function bt(P,N){for(;P!==null;){var T=$(P,N);if(T){if(T.get)return X(T.get);if(typeof T.value=="function")return X(T.value)}P=x(P)}return function(at){return console.warn("fallback value for",at),null}}var Ut=z(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gt=z(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),l=z(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),w=z(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I=z(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),it=z(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ct=z(["#text"]),ft=z(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Q=z(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ut=z(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ht=z(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vt=h(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Jt=h(/<%[\s\S]*|[\s\S]*%>/gm),Ft=h(/^data-[\-\w.\u00B7-\uFFFF]/),gt=h(/^aria-[\-\w]+$/),rt=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),St=h(/^(?:\w+script|data):/i),Lt=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};function xt(P){if(Array.isArray(P)){for(var N=0,T=Array(P.length);N<P.length;N++)T[N]=P[N];return T}return Array.from(P)}var qt=function(){return typeof window=="undefined"?null:window},pe=function(P,N){if((P===void 0?"undefined":$t(P))!=="object"||typeof P.createPolicy!="function")return null;var T=null,at="data-tt-policy-suffix";N.currentScript&&N.currentScript.hasAttribute(at)&&(T=N.currentScript.getAttribute(at));var st="dompurify"+(T?"#"+T:"");try{return P.createPolicy(st,{createHTML:function(Zt){return Zt}})}catch{return console.warn("TrustedTypes policy "+st+" could not be created."),null}};return function P(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qt(),T=function(o){return P(o)};if(T.version="2.3.1",T.removed=[],!N||!N.document||N.document.nodeType!==9)return T.isSupported=!1,T;var at=N.document,st=N.document,Zt=N.DocumentFragment,Pe=N.HTMLTemplateElement,ae=N.Node,Ue=N.Element,fe=N.NodeFilter,Kt=N.NamedNodeMap,De=Kt===void 0?N.NamedNodeMap||N.MozNamedAttrMap:Kt,He=N.Text,yn=N.Comment,bn=N.DOMParser,Te=N.trustedTypes,Vt=Ue.prototype,qe=bt(Vt,"cloneNode"),Ee=bt(Vt,"nextSibling"),Be=bt(Vt,"childNodes"),he=bt(Vt,"parentNode");if(typeof Pe=="function"){var ge=st.createElement("template");ge.content&&ge.content.ownerDocument&&(st=ge.content.ownerDocument)}var It=pe(Te,at),We=It&&te?It.createHTML(""):"",me=st,ye=me.implementation,vn=me.createNodeIterator,wn=me.createDocumentFragment,ot=me.getElementsByTagName,Ge=at.importNode,Yt={};try{Yt=pt(st).documentMode?st.documentMode:{}}catch{}var At={};T.isSupported=typeof he=="function"&&ye&&ye.createHTMLDocument!==void 0&&Yt!==9;var be=vt,ve=Jt,Je=Ft,Fe=gt,_n=St,Ze=Lt,$e=rt,wt=null,Ke=R({},[].concat(xt(Ut),xt(Gt),xt(l),xt(I),xt(Ct))),kt=null,Ve=R({},[].concat(xt(ft),xt(Q),xt(ut),xt(ht))),Le=null,we=null,Ye=!0,Ie=!0,Xe=!1,Bt=!1,Xt=!1,_e=!1,ze=!1,Qt=!1,xe=!1,Qe=!0,te=!1,ke=!0,Me=!0,se=!1,ee={},Wt=null,Re=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ce=null,tn=R({},["audio","video","img","source","image","track"]),le=null,en=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ce="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",Dt="http://www.w3.org/1999/xhtml",Se=Dt,je=!1,ne=null,xn=st.createElement("form"),ue=function(o){ne&&ne===o||(o&&(o===void 0?"undefined":$t(o))==="object"||(o={}),o=pt(o),wt="ALLOWED_TAGS"in o?R({},o.ALLOWED_TAGS):Ke,kt="ALLOWED_ATTR"in o?R({},o.ALLOWED_ATTR):Ve,le="ADD_URI_SAFE_ATTR"in o?R(pt(en),o.ADD_URI_SAFE_ATTR):en,ce="ADD_DATA_URI_TAGS"in o?R(pt(tn),o.ADD_DATA_URI_TAGS):tn,Wt="FORBID_CONTENTS"in o?R({},o.FORBID_CONTENTS):Re,Le="FORBID_TAGS"in o?R({},o.FORBID_TAGS):{},we="FORBID_ATTR"in o?R({},o.FORBID_ATTR):{},ee="USE_PROFILES"in o&&o.USE_PROFILES,Ye=o.ALLOW_ARIA_ATTR!==!1,Ie=o.ALLOW_DATA_ATTR!==!1,Xe=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Bt=o.SAFE_FOR_TEMPLATES||!1,Xt=o.WHOLE_DOCUMENT||!1,Qt=o.RETURN_DOM||!1,xe=o.RETURN_DOM_FRAGMENT||!1,Qe=o.RETURN_DOM_IMPORT!==!1,te=o.RETURN_TRUSTED_TYPE||!1,ze=o.FORCE_BODY||!1,ke=o.SANITIZE_DOM!==!1,Me=o.KEEP_CONTENT!==!1,se=o.IN_PLACE||!1,$e=o.ALLOWED_URI_REGEXP||$e,Se=o.NAMESPACE||Dt,Bt&&(Ie=!1),xe&&(Qt=!0),ee&&(wt=R({},[].concat(xt(Ct))),kt=[],ee.html===!0&&(R(wt,Ut),R(kt,ft)),ee.svg===!0&&(R(wt,Gt),R(kt,Q),R(kt,ht)),ee.svgFilters===!0&&(R(wt,l),R(kt,Q),R(kt,ht)),ee.mathMl===!0&&(R(wt,I),R(kt,ut),R(kt,ht))),o.ADD_TAGS&&(wt===Ke&&(wt=pt(wt)),R(wt,o.ADD_TAGS)),o.ADD_ATTR&&(kt===Ve&&(kt=pt(kt)),R(kt,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&R(le,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(Wt===Re&&(Wt=pt(Wt)),R(Wt,o.FORBID_CONTENTS)),Me&&(wt["#text"]=!0),Xt&&R(wt,["html","head","body"]),wt.table&&(R(wt,["tbody"]),delete Le.tbody),z&&z(o),ne=o)},nn=R({},["mi","mo","mn","ms","mtext"]),rn=R({},["foreignobject","desc","title","annotation-xml"]),re=R({},Gt);R(re,l),R(re,w);var Ne=R({},I);R(Ne,it);var kn=function(o){var O=he(o);O&&O.tagName||(O={namespaceURI:Dt,tagName:"template"});var k=L(o.tagName),et=L(O.tagName);if(o.namespaceURI===zt)return O.namespaceURI===Dt?k==="svg":O.namespaceURI===Ce?k==="svg"&&(et==="annotation-xml"||nn[et]):Boolean(re[k]);if(o.namespaceURI===Ce)return O.namespaceURI===Dt?k==="math":O.namespaceURI===zt?k==="math"&&rn[et]:Boolean(Ne[k]);if(o.namespaceURI===Dt){if(O.namespaceURI===zt&&!rn[et]||O.namespaceURI===Ce&&!nn[et])return!1;var ct=R({},["title","style","font","a","script"]);return!Ne[k]&&(ct[k]||!re[k])}return!1},Mt=function(o){C(T.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=We}catch{o.remove()}}},on=function(o,O){try{C(T.removed,{attribute:O.getAttributeNode(o),from:O})}catch{C(T.removed,{attribute:null,from:O})}if(O.removeAttribute(o),o==="is"&&!kt[o])if(Qt||xe)try{Mt(O)}catch{}else try{O.setAttribute(o,"")}catch{}},Rt=function(o){var O=void 0,k=void 0;if(ze)o="<remove></remove>"+o;else{var et=i(o,/^[\r\n\t ]+/);k=et&&et[0]}var ct=It?It.createHTML(o):o;if(Se===Dt)try{O=new bn().parseFromString(ct,"text/html")}catch{}if(!O||!O.documentElement){O=ye.createDocument(Se,"template",null);try{O.documentElement.innerHTML=je?"":ct}catch{}}var jt=O.body||O.documentElement;return o&&k&&jt.insertBefore(st.createTextNode(k),jt.childNodes[0]||null),Se===Dt?ot.call(O,Xt?"html":"body")[0]:Xt?O.documentElement:jt},de=function(o){return vn.call(o.ownerDocument||o,o,fe.SHOW_ELEMENT|fe.SHOW_COMMENT|fe.SHOW_TEXT,null,!1)},an=function(o){return!(o instanceof He||o instanceof yn||typeof o.nodeName=="string"&&typeof o.textContent=="string"&&typeof o.removeChild=="function"&&o.attributes instanceof De&&typeof o.removeAttribute=="function"&&typeof o.setAttribute=="function"&&typeof o.namespaceURI=="string"&&typeof o.insertBefore=="function")},Ht=function(o){return(ae===void 0?"undefined":$t(ae))==="object"?o instanceof ae:o&&(o===void 0?"undefined":$t(o))==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Nt=function(o,O,k){At[o]&&W(At[o],function(et){et.call(T,O,k,ne)})},sn=function(o){var O=void 0;if(Nt("beforeSanitizeElements",o,null),an(o)||i(o.nodeName,/[\u0080-\uFFFF]/))return Mt(o),!0;var k=L(o.nodeName);if(Nt("uponSanitizeElement",o,{tagName:k,allowedTags:wt}),!Ht(o.firstElementChild)&&(!Ht(o.content)||!Ht(o.content.firstElementChild))&&Z(/<[/\w]/g,o.innerHTML)&&Z(/<[/\w]/g,o.textContent)||k==="select"&&Z(/<template/i,o.innerHTML))return Mt(o),!0;if(!wt[k]||Le[k]){if(Me&&!Wt[k]){var et=he(o)||o.parentNode,ct=Be(o)||o.childNodes;if(ct&&et)for(var jt=ct.length-1;jt>=0;--jt)et.insertBefore(qe(ct[jt],!0),Ee(o))}return Mt(o),!0}return o instanceof Ue&&!kn(o)?(Mt(o),!0):k!=="noscript"&&k!=="noembed"||!Z(/<\/no(script|embed)/i,o.innerHTML)?(Bt&&o.nodeType===3&&(O=o.textContent,O=s(O,be," "),O=s(O,ve," "),o.textContent!==O&&(C(T.removed,{element:o.cloneNode()}),o.textContent=O)),Nt("afterSanitizeElements",o,null),!1):(Mt(o),!0)},cn=function(o,O,k){if(ke&&(O==="id"||O==="name")&&(k in st||k in xn))return!1;if(!(Ie&&!we[O]&&Z(Je,O))){if(!(Ye&&Z(Fe,O))){if(!kt[O]||we[O])return!1;if(!le[O]){if(!Z($e,s(k,Ze,""))){if((O!=="src"&&O!=="xlink:href"&&O!=="href"||o==="script"||f(k,"data:")!==0||!ce[o])&&!(Xe&&!Z(_n,s(k,Ze,"")))){if(k)return!1}}}}}return!0},ln=function(o){var O=void 0,k=void 0,et=void 0,ct=void 0;Nt("beforeSanitizeAttributes",o,null);var jt=o.attributes;if(jt){var _t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:kt};for(ct=jt.length;ct--;){var Oe=O=jt[ct],Tt=Oe.name,Ae=Oe.namespaceURI;if(k=j(O.value),et=L(Tt),_t.attrName=et,_t.attrValue=k,_t.keepAttr=!0,_t.forceKeepAttr=void 0,Nt("uponSanitizeAttribute",o,_t),k=_t.attrValue,!_t.forceKeepAttr&&(on(Tt,o),_t.keepAttr))if(Z(/\/>/i,k))on(Tt,o);else{Bt&&(k=s(k,be," "),k=s(k,ve," "));var un=o.nodeName.toLowerCase();if(cn(un,et,k))try{Ae?o.setAttributeNS(Ae,Tt,k):o.setAttribute(Tt,k),Y(T.removed)}catch{}}}Nt("afterSanitizeAttributes",o,null)}},Cn=function o(O){var k=void 0,et=de(O);for(Nt("beforeSanitizeShadowDOM",O,null);k=et.nextNode();)Nt("uponSanitizeShadowNode",k,null),sn(k)||(k.content instanceof Zt&&o(k.content),ln(k));Nt("afterSanitizeShadowDOM",O,null)};return T.sanitize=function(o,O){var k=void 0,et=void 0,ct=void 0,jt=void 0,_t=void 0;if((je=!o)&&(o="<!-->"),typeof o!="string"&&!Ht(o)){if(typeof o.toString!="function")throw tt("toString is not a function");if(typeof(o=o.toString())!="string")throw tt("dirty is not a string, aborting")}if(!T.isSupported){if($t(N.toStaticHTML)==="object"||typeof N.toStaticHTML=="function"){if(typeof o=="string")return N.toStaticHTML(o);if(Ht(o))return N.toStaticHTML(o.outerHTML)}return o}if(_e||ue(O),T.removed=[],typeof o=="string"&&(se=!1),!se)if(o instanceof ae)(et=(k=Rt("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&et.nodeName==="BODY"||et.nodeName==="HTML"?k=et:k.appendChild(et);else{if(!Qt&&!Bt&&!Xt&&o.indexOf("<")===-1)return It&&te?It.createHTML(o):o;if(!(k=Rt(o)))return Qt?null:We}k&&ze&&Mt(k.firstChild);for(var Oe=de(se?o:k);ct=Oe.nextNode();)ct.nodeType===3&&ct===jt||sn(ct)||(ct.content instanceof Zt&&Cn(ct.content),ln(ct),jt=ct);if(jt=null,se)return o;if(Qt){if(xe)for(_t=wn.call(k.ownerDocument);k.firstChild;)_t.appendChild(k.firstChild);else _t=k;return Qe&&(_t=Ge.call(at,_t,!0)),_t}var Tt=Xt?k.outerHTML:k.innerHTML;return Bt&&(Tt=s(Tt,be," "),Tt=s(Tt,ve," ")),It&&te?It.createHTML(Tt):Tt},T.setConfig=function(o){ue(o),_e=!0},T.clearConfig=function(){ne=null,_e=!1},T.isValidAttribute=function(o,O,k){ne||ue({});var et=L(o),ct=L(O);return cn(et,ct,k)},T.addHook=function(o,O){typeof O=="function"&&(At[o]=At[o]||[],C(At[o],O))},T.removeHook=function(o){At[o]&&Y(At[o])},T.removeHooks=function(o){At[o]&&(At[o]=[])},T.removeAllHooks=function(){At={}},T}()}()},729:y=>{var c=Object.prototype.hasOwnProperty,_="~";function E(){}function x(u,m,g){this.fn=u,this.context=m,this.once=g||!1}function $(u,m,g,M,G){if(typeof g!="function")throw new TypeError("The listener must be a function");var W=new x(g,M||u,G),Y=_?_+m:m;return u._events[Y]?u._events[Y].fn?u._events[Y]=[u._events[Y],W]:u._events[Y].push(W):(u._events[Y]=W,u._eventsCount++),u}function z(u,m){--u._eventsCount==0?u._events=new E:delete u._events[m]}function h(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(_=!1)),h.prototype.eventNames=function(){var u,m,g=[];if(this._eventsCount===0)return g;for(m in u=this._events)c.call(u,m)&&g.push(_?m.slice(1):m);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(u)):g},h.prototype.listeners=function(u){var m=_?_+u:u,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var M=0,G=g.length,W=new Array(G);M<G;M++)W[M]=g[M].fn;return W},h.prototype.listenerCount=function(u){var m=_?_+u:u,g=this._events[m];return g?g.fn?1:g.length:0},h.prototype.emit=function(u,m,g,M,G,W){var Y=_?_+u:u;if(!this._events[Y])return!1;var C,L,i=this._events[Y],s=arguments.length;if(i.fn){switch(i.once&&this.removeListener(u,i.fn,void 0,!0),s){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,m),!0;case 3:return i.fn.call(i.context,m,g),!0;case 4:return i.fn.call(i.context,m,g,M),!0;case 5:return i.fn.call(i.context,m,g,M,G),!0;case 6:return i.fn.call(i.context,m,g,M,G,W),!0}for(L=1,C=new Array(s-1);L<s;L++)C[L-1]=arguments[L];i.fn.apply(i.context,C)}else{var f,j=i.length;for(L=0;L<j;L++)switch(i[L].once&&this.removeListener(u,i[L].fn,void 0,!0),s){case 1:i[L].fn.call(i[L].context);break;case 2:i[L].fn.call(i[L].context,m);break;case 3:i[L].fn.call(i[L].context,m,g);break;case 4:i[L].fn.call(i[L].context,m,g,M);break;default:if(!C)for(f=1,C=new Array(s-1);f<s;f++)C[f-1]=arguments[f];i[L].fn.apply(i[L].context,C)}}return!0},h.prototype.on=function(u,m,g){return $(this,u,m,g,!1)},h.prototype.once=function(u,m,g){return $(this,u,m,g,!0)},h.prototype.removeListener=function(u,m,g,M){var G=_?_+u:u;if(!this._events[G])return this;if(!m)return z(this,G),this;var W=this._events[G];if(W.fn)W.fn!==m||M&&!W.once||g&&W.context!==g||z(this,G);else{for(var Y=0,C=[],L=W.length;Y<L;Y++)(W[Y].fn!==m||M&&!W[Y].once||g&&W[Y].context!==g)&&C.push(W[Y]);C.length?this._events[G]=C.length===1?C[0]:C:z(this,G)}return this},h.prototype.removeAllListeners=function(u){var m;return u?(m=_?_+u:u,this._events[m]&&z(this,m)):(this._events=new E,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=_,h.EventEmitter=h,y.exports=h},717:y=>{typeof Object.create=="function"?y.exports=function(c,_){c.super_=_,c.prototype=Object.create(_.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:y.exports=function(c,_){c.super_=_;var E=function(){};E.prototype=_.prototype,c.prototype=new E,c.prototype.constructor=c}},824:y=>{var c=1e3,_=60*c,E=60*_,x=24*E;function $(z,h,u,m){var g=h>=1.5*u;return Math.round(z/u)+" "+m+(g?"s":"")}y.exports=function(z,h){h=h||{};var u,m,g=typeof z;if(g==="string"&&z.length>0)return function(M){if(!((M=String(M)).length>100)){var G=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(M);if(G){var W=parseFloat(G[1]);switch((G[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*W;case"weeks":case"week":case"w":return 6048e5*W;case"days":case"day":case"d":return W*x;case"hours":case"hour":case"hrs":case"hr":case"h":return W*E;case"minutes":case"minute":case"mins":case"min":case"m":return W*_;case"seconds":case"second":case"secs":case"sec":case"s":return W*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return W;default:return}}}}(z);if(g==="number"&&isFinite(z))return h.long?(u=z,(m=Math.abs(u))>=x?$(u,m,x,"day"):m>=E?$(u,m,E,"hour"):m>=_?$(u,m,_,"minute"):m>=c?$(u,m,c,"second"):u+" ms"):function(M){var G=Math.abs(M);return G>=x?Math.round(M/x)+"d":G>=E?Math.round(M/E)+"h":G>=_?Math.round(M/_)+"m":G>=c?Math.round(M/c)+"s":M+"ms"}(z);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(z))}},520:(y,c,_)=>{var E=_(155),x=E.platform==="win32",$=_(539);function z(i,s){for(var f=[],j=0;j<i.length;j++){var Z=i[j];Z&&Z!=="."&&(Z===".."?f.length&&f[f.length-1]!==".."?f.pop():s&&f.push(".."):f.push(Z))}return f}function h(i){for(var s=i.length-1,f=0;f<=s&&!i[f];f++);for(var j=s;j>=0&&!i[j];j--);return f===0&&j===s?i:f>j?[]:i.slice(f,j+1)}var u=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,m=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,g={};function M(i){var s=u.exec(i),f=(s[1]||"")+(s[2]||""),j=s[3]||"",Z=m.exec(j);return[f,Z[1],Z[2],Z[3]]}function G(i){var s=u.exec(i),f=s[1]||"",j=!!f&&f[1]!==":";return{device:f,isUnc:j,isAbsolute:j||!!s[2],tail:s[3]}}function W(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}g.resolve=function(){for(var i="",s="",f=!1,j=arguments.length-1;j>=-1;j--){var Z;if(j>=0?Z=arguments[j]:i?(Z=E.env["="+i])&&Z.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||(Z=i+"\\"):Z=E.cwd(),!$.isString(Z))throw new TypeError("Arguments to path.resolve must be strings");if(Z){var tt=G(Z),X=tt.device,R=tt.isUnc,pt=tt.isAbsolute,bt=tt.tail;if((!X||!i||X.toLowerCase()===i.toLowerCase())&&(i||(i=X),f||(s=bt+"\\"+s,f=pt),i&&f))break}}return R&&(i=W(i)),i+(f?"\\":"")+(s=z(s.split(/[\\\/]+/),!f).join("\\"))||"."},g.normalize=function(i){var s=G(i),f=s.device,j=s.isUnc,Z=s.isAbsolute,tt=s.tail,X=/[\\\/]$/.test(tt);return(tt=z(tt.split(/[\\\/]+/),!Z).join("\\"))||Z||(tt="."),tt&&X&&(tt+="\\"),j&&(f=W(f)),f+(Z?"\\":"")+tt},g.isAbsolute=function(i){return G(i).isAbsolute},g.join=function(){for(var i=[],s=0;s<arguments.length;s++){var f=arguments[s];if(!$.isString(f))throw new TypeError("Arguments to path.join must be strings");f&&i.push(f)}var j=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(j=j.replace(/^[\\\/]{2,}/,"\\")),g.normalize(j)},g.relative=function(i,s){i=g.resolve(i),s=g.resolve(s);for(var f=i.toLowerCase(),j=s.toLowerCase(),Z=h(s.split("\\")),tt=h(f.split("\\")),X=h(j.split("\\")),R=Math.min(tt.length,X.length),pt=R,bt=0;bt<R;bt++)if(tt[bt]!==X[bt]){pt=bt;break}if(pt==0)return s;var Ut=[];for(bt=pt;bt<tt.length;bt++)Ut.push("..");return(Ut=Ut.concat(Z.slice(pt))).join("\\")},g._makeLong=function(i){if(!$.isString(i))return i;if(!i)return"";var s=g.resolve(i);return/^[a-zA-Z]\:\\/.test(s)?"\\\\?\\"+s:/^\\\\[^?.]/.test(s)?"\\\\?\\UNC\\"+s.substring(2):i},g.dirname=function(i){var s=M(i),f=s[0],j=s[1];return f||j?(j&&(j=j.substr(0,j.length-1)),f+j):"."},g.basename=function(i,s){var f=M(i)[2];return s&&f.substr(-1*s.length)===s&&(f=f.substr(0,f.length-s.length)),f},g.extname=function(i){return M(i)[3]},g.format=function(i){if(!$.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var s=i.root||"";if(!$.isString(s))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var f=i.dir,j=i.base||"";return f?f[f.length-1]===g.sep?f+j:f+g.sep+j:j},g.parse=function(i){if(!$.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var s=M(i);if(!s||s.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},g.sep="\\",g.delimiter=";";var Y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,C={};function L(i){return Y.exec(i).slice(1)}C.resolve=function(){for(var i="",s=!1,f=arguments.length-1;f>=-1&&!s;f--){var j=f>=0?arguments[f]:E.cwd();if(!$.isString(j))throw new TypeError("Arguments to path.resolve must be strings");j&&(i=j+"/"+i,s=j[0]==="/")}return(s?"/":"")+(i=z(i.split("/"),!s).join("/"))||"."},C.normalize=function(i){var s=C.isAbsolute(i),f=i&&i[i.length-1]==="/";return(i=z(i.split("/"),!s).join("/"))||s||(i="."),i&&f&&(i+="/"),(s?"/":"")+i},C.isAbsolute=function(i){return i.charAt(0)==="/"},C.join=function(){for(var i="",s=0;s<arguments.length;s++){var f=arguments[s];if(!$.isString(f))throw new TypeError("Arguments to path.join must be strings");f&&(i+=i?"/"+f:f)}return C.normalize(i)},C.relative=function(i,s){i=C.resolve(i).substr(1),s=C.resolve(s).substr(1);for(var f=h(i.split("/")),j=h(s.split("/")),Z=Math.min(f.length,j.length),tt=Z,X=0;X<Z;X++)if(f[X]!==j[X]){tt=X;break}var R=[];for(X=tt;X<f.length;X++)R.push("..");return(R=R.concat(j.slice(tt))).join("/")},C._makeLong=function(i){return i},C.dirname=function(i){var s=L(i),f=s[0],j=s[1];return f||j?(j&&(j=j.substr(0,j.length-1)),f+j):"."},C.basename=function(i,s){var f=L(i)[2];return s&&f.substr(-1*s.length)===s&&(f=f.substr(0,f.length-s.length)),f},C.extname=function(i){return L(i)[3]},C.format=function(i){if(!$.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var s=i.root||"";if(!$.isString(s))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+C.sep:"")+(i.base||"")},C.parse=function(i){if(!$.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var s=L(i);if(!s||s.length!==4)throw new TypeError("Invalid path '"+i+"'");return s[1]=s[1]||"",s[2]=s[2]||"",s[3]=s[3]||"",{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},C.sep="/",C.delimiter=":",y.exports=x?g:C,y.exports.posix=C,y.exports.win32=g},155:y=>{var c,_,E=y.exports={};function x(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}function z(C){if(c===setTimeout)return setTimeout(C,0);if((c===x||!c)&&setTimeout)return c=setTimeout,setTimeout(C,0);try{return c(C,0)}catch{try{return c.call(null,C,0)}catch{return c.call(this,C,0)}}}(function(){try{c=typeof setTimeout=="function"?setTimeout:x}catch{c=x}try{_=typeof clearTimeout=="function"?clearTimeout:$}catch{_=$}})();var h,u=[],m=!1,g=-1;function M(){m&&h&&(m=!1,h.length?u=h.concat(u):g=-1,u.length&&G())}function G(){if(!m){var C=z(M);m=!0;for(var L=u.length;L;){for(h=u,u=[];++g<L;)h&&h[g].run();g=-1,L=u.length}h=null,m=!1,function(i){if(_===clearTimeout)return clearTimeout(i);if((_===$||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(i);try{_(i)}catch{try{return _.call(null,i)}catch{return _.call(this,i)}}}(C)}}function W(C,L){this.fun=C,this.array=L}function Y(){}E.nextTick=function(C){var L=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)L[i-1]=arguments[i];u.push(new W(C,L)),u.length!==1||m||z(G)},W.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=Y,E.addListener=Y,E.once=Y,E.off=Y,E.removeListener=Y,E.removeAllListeners=Y,E.emit=Y,E.prependListener=Y,E.prependOnceListener=Y,E.listeners=function(C){return[]},E.binding=function(C){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(C){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},384:y=>{y.exports=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}},539:(y,c,_)=>{var E=_(155),x=/%[sdj%]/g;c.format=function(l){if(!i(l)){for(var w=[],I=0;I<arguments.length;I++)w.push(h(arguments[I]));return w.join(" ")}I=1;for(var it=arguments,Ct=it.length,ft=String(l).replace(x,function(ut){if(ut==="%%")return"%";if(I>=Ct)return ut;switch(ut){case"%s":return String(it[I++]);case"%d":return Number(it[I++]);case"%j":try{return JSON.stringify(it[I++])}catch{return"[Circular]"}default:return ut}}),Q=it[I];I<Ct;Q=it[++I])C(Q)||!j(Q)?ft+=" "+Q:ft+=" "+h(Q);return ft},c.deprecate=function(l,w){if(s(_.g.process))return function(){return c.deprecate(l,w).apply(this,arguments)};if(E.noDeprecation===!0)return l;var I=!1;return function(){if(!I){if(E.throwDeprecation)throw new Error(w);E.traceDeprecation?console.trace(w):console.error(w),I=!0}return l.apply(this,arguments)}};var $,z={};function h(l,w){var I={seen:[],stylize:m};return arguments.length>=3&&(I.depth=arguments[2]),arguments.length>=4&&(I.colors=arguments[3]),Y(w)?I.showHidden=w:w&&c._extend(I,w),s(I.showHidden)&&(I.showHidden=!1),s(I.depth)&&(I.depth=2),s(I.colors)&&(I.colors=!1),s(I.customInspect)&&(I.customInspect=!0),I.colors&&(I.stylize=u),g(I,l,I.depth)}function u(l,w){var I=h.styles[w];return I?"\x1B["+h.colors[I][0]+"m"+l+"\x1B["+h.colors[I][1]+"m":l}function m(l,w){return l}function g(l,w,I){if(l.customInspect&&w&&X(w.inspect)&&w.inspect!==c.inspect&&(!w.constructor||w.constructor.prototype!==w)){var it=w.inspect(I,l);return i(it)||(it=g(l,it,I)),it}var Ct=function(gt,rt){if(s(rt))return gt.stylize("undefined","undefined");if(i(rt)){var St="'"+JSON.stringify(rt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return gt.stylize(St,"string")}return L(rt)?gt.stylize(""+rt,"number"):Y(rt)?gt.stylize(""+rt,"boolean"):C(rt)?gt.stylize("null","null"):void 0}(l,w);if(Ct)return Ct;var ft=Object.keys(w),Q=function(gt){var rt={};return gt.forEach(function(St,Lt){rt[St]=!0}),rt}(ft);if(l.showHidden&&(ft=Object.getOwnPropertyNames(w)),tt(w)&&(ft.indexOf("message")>=0||ft.indexOf("description")>=0))return M(w);if(ft.length===0){if(X(w)){var ut=w.name?": "+w.name:"";return l.stylize("[Function"+ut+"]","special")}if(f(w))return l.stylize(RegExp.prototype.toString.call(w),"regexp");if(Z(w))return l.stylize(Date.prototype.toString.call(w),"date");if(tt(w))return M(w)}var ht,vt="",Jt=!1,Ft=["{","}"];return W(w)&&(Jt=!0,Ft=["[","]"]),X(w)&&(vt=" [Function"+(w.name?": "+w.name:"")+"]"),f(w)&&(vt=" "+RegExp.prototype.toString.call(w)),Z(w)&&(vt=" "+Date.prototype.toUTCString.call(w)),tt(w)&&(vt=" "+M(w)),ft.length!==0||Jt&&w.length!=0?I<0?f(w)?l.stylize(RegExp.prototype.toString.call(w),"regexp"):l.stylize("[Object]","special"):(l.seen.push(w),ht=Jt?function(gt,rt,St,Lt,$t){for(var xt=[],qt=0,pe=rt.length;qt<pe;++qt)Gt(rt,String(qt))?xt.push(G(gt,rt,St,Lt,String(qt),!0)):xt.push("");return $t.forEach(function(P){P.match(/^\d+$/)||xt.push(G(gt,rt,St,Lt,P,!0))}),xt}(l,w,I,Q,ft):ft.map(function(gt){return G(l,w,I,Q,gt,Jt)}),l.seen.pop(),function(gt,rt,St){return gt.reduce(function(Lt,$t){return $t.indexOf(`
`),Lt+$t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?St[0]+(rt===""?"":rt+`
 `)+" "+gt.join(`,
  `)+" "+St[1]:St[0]+rt+" "+gt.join(", ")+" "+St[1]}(ht,vt,Ft)):Ft[0]+vt+Ft[1]}function M(l){return"["+Error.prototype.toString.call(l)+"]"}function G(l,w,I,it,Ct,ft){var Q,ut,ht;if((ht=Object.getOwnPropertyDescriptor(w,Ct)||{value:w[Ct]}).get?ut=ht.set?l.stylize("[Getter/Setter]","special"):l.stylize("[Getter]","special"):ht.set&&(ut=l.stylize("[Setter]","special")),Gt(it,Ct)||(Q="["+Ct+"]"),ut||(l.seen.indexOf(ht.value)<0?(ut=C(I)?g(l,ht.value,null):g(l,ht.value,I-1)).indexOf(`
`)>-1&&(ut=ft?ut.split(`
`).map(function(vt){return"  "+vt}).join(`
`).substr(2):`
`+ut.split(`
`).map(function(vt){return"   "+vt}).join(`
`)):ut=l.stylize("[Circular]","special")),s(Q)){if(ft&&Ct.match(/^\d+$/))return ut;(Q=JSON.stringify(""+Ct)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Q=Q.substr(1,Q.length-2),Q=l.stylize(Q,"name")):(Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Q=l.stylize(Q,"string"))}return Q+": "+ut}function W(l){return Array.isArray(l)}function Y(l){return typeof l=="boolean"}function C(l){return l===null}function L(l){return typeof l=="number"}function i(l){return typeof l=="string"}function s(l){return l===void 0}function f(l){return j(l)&&R(l)==="[object RegExp]"}function j(l){return typeof l=="object"&&l!==null}function Z(l){return j(l)&&R(l)==="[object Date]"}function tt(l){return j(l)&&(R(l)==="[object Error]"||l instanceof Error)}function X(l){return typeof l=="function"}function R(l){return Object.prototype.toString.call(l)}function pt(l){return l<10?"0"+l.toString(10):l.toString(10)}c.debuglog=function(l){if(s($)&&($=E.env.NODE_DEBUG||""),l=l.toUpperCase(),!z[l])if(new RegExp("\\b"+l+"\\b","i").test($)){var w=E.pid;z[l]=function(){var I=c.format.apply(c,arguments);console.error("%s %d: %s",l,w,I)}}else z[l]=function(){};return z[l]},c.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=W,c.isBoolean=Y,c.isNull=C,c.isNullOrUndefined=function(l){return l==null},c.isNumber=L,c.isString=i,c.isSymbol=function(l){return typeof l=="symbol"},c.isUndefined=s,c.isRegExp=f,c.isObject=j,c.isDate=Z,c.isError=tt,c.isFunction=X,c.isPrimitive=function(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||l===void 0},c.isBuffer=_(384);var bt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ut(){var l=new Date,w=[pt(l.getHours()),pt(l.getMinutes()),pt(l.getSeconds())].join(":");return[l.getDate(),bt[l.getMonth()],w].join(" ")}function Gt(l,w){return Object.prototype.hasOwnProperty.call(l,w)}c.log=function(){console.log("%s - %s",Ut(),c.format.apply(c,arguments))},c.inherits=_(717),c._extend=function(l,w){if(!w||!j(w))return l;for(var I=Object.keys(w),it=I.length;it--;)l[I[it]]=w[I[it]];return l}}},J={};function F(y){var c=J[y];if(c!==void 0)return c.exports;var _=J[y]={exports:{}};return B[y].call(_.exports,_,_.exports,F),_.exports}F.n=y=>{var c=y&&y.__esModule?()=>y.default:()=>y;return F.d(c,{a:c}),c},F.d=(y,c)=>{for(var _ in c)F.o(c,_)&&!F.o(y,_)&&Object.defineProperty(y,_,{enumerable:!0,get:c[_]})},F.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),F.o=(y,c)=>Object.prototype.hasOwnProperty.call(y,c),F.r=y=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var V={};return(()=>{F.r(V),F.d(V,{LSPluginUser:()=>Ae,setupPluginUserInstance:()=>un});var y=F(520);F(856);const c=function(e,n){return e===n||e!=e&&n!=n},_=function(e,n){for(var t=e.length;t--;)if(c(e[t][0],n))return t;return-1};var E=Array.prototype.splice;function x(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}x.prototype.clear=function(){this.__data__=[],this.size=0},x.prototype.delete=function(e){var n=this.__data__,t=_(n,e);return!(t<0||(t==n.length-1?n.pop():E.call(n,t,1),--this.size,0))},x.prototype.get=function(e){var n=this.__data__,t=_(n,e);return t<0?void 0:n[t][1]},x.prototype.has=function(e){return _(this.__data__,e)>-1},x.prototype.set=function(e,n){var t=this.__data__,r=_(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this};const $=x,z=typeof fn=="object"&&fn&&fn.Object===Object&&fn;var h=typeof self=="object"&&self&&self.Object===Object&&self;const u=z||h||Function("return this")(),m=u.Symbol;var g=Object.prototype,M=g.hasOwnProperty,G=g.toString,W=m?m.toStringTag:void 0,Y=Object.prototype.toString,C=m?m.toStringTag:void 0;const L=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":C&&C in Object(e)?function(n){var t=M.call(n,W),r=n[W];try{n[W]=void 0;var a=!0}catch{}var d=G.call(n);return a&&(t?n[W]=r:delete n[W]),d}(e):function(n){return Y.call(n)}(e)},i=function(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")},s=function(e){if(!i(e))return!1;var n=L(e);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},f=u["__core-js_shared__"];var j,Z=(j=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",tt=Function.prototype.toString,X=/^\[object .+?Constructor\]$/,R=Function.prototype,pt=Object.prototype,bt=R.toString,Ut=pt.hasOwnProperty,Gt=RegExp("^"+bt.call(Ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const l=function(e){return!(!i(e)||(n=e,Z&&Z in n))&&(s(e)?Gt:X).test(function(t){if(t!=null){try{return tt.call(t)}catch{}try{return t+""}catch{}}return""}(e));var n},w=function(e,n){var t=function(r,a){return r==null?void 0:r[a]}(e,n);return l(t)?t:void 0},I=w(u,"Map"),it=w(Object,"create");var Ct=Object.prototype.hasOwnProperty,ft=Object.prototype.hasOwnProperty;function Q(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Q.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},Q.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Q.prototype.get=function(e){var n=this.__data__;if(it){var t=n[e];return t==="__lodash_hash_undefined__"?void 0:t}return Ct.call(n,e)?n[e]:void 0},Q.prototype.has=function(e){var n=this.__data__;return it?n[e]!==void 0:ft.call(n,e)},Q.prototype.set=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=it&&n===void 0?"__lodash_hash_undefined__":n,this};const ut=Q,ht=function(e,n){var t,r,a=e.__data__;return((r=typeof(t=n))=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null)?a[typeof n=="string"?"string":"hash"]:a.map};function vt(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}vt.prototype.clear=function(){this.size=0,this.__data__={hash:new ut,map:new(I||$),string:new ut}},vt.prototype.delete=function(e){var n=ht(this,e).delete(e);return this.size-=n?1:0,n},vt.prototype.get=function(e){return ht(this,e).get(e)},vt.prototype.has=function(e){return ht(this,e).has(e)},vt.prototype.set=function(e,n){var t=ht(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this};const Jt=vt;function Ft(e){var n=this.__data__=new $(e);this.size=n.size}Ft.prototype.clear=function(){this.__data__=new $,this.size=0},Ft.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Ft.prototype.get=function(e){return this.__data__.get(e)},Ft.prototype.has=function(e){return this.__data__.has(e)},Ft.prototype.set=function(e,n){var t=this.__data__;if(t instanceof $){var r=t.__data__;if(!I||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Jt(r)}return t.set(e,n),this.size=t.size,this};const gt=Ft,rt=function(){try{var e=w(Object,"defineProperty");return e({},"",{}),e}catch{}}(),St=function(e,n,t){n=="__proto__"&&rt?rt(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},Lt=function(e,n,t){(t!==void 0&&!c(e[n],t)||t===void 0&&!(n in e))&&St(e,n,t)},$t=function(e,n,t){for(var r=-1,a=Object(e),d=t(e),p=d.length;p--;){var v=d[++r];if(n(a[v],v,a)===!1)break}return e};var xt=H&&!H.nodeType&&H,qt=xt&&!0&&b&&!b.nodeType&&b,pe=qt&&qt.exports===xt?u.Buffer:void 0,P=pe?pe.allocUnsafe:void 0;const N=u.Uint8Array,T=function(e,n){var t,r,a=n?(t=e.buffer,r=new t.constructor(t.byteLength),new N(r).set(new N(t)),r):e.buffer;return new e.constructor(a,e.byteOffset,e.length)};var at=Object.create;const st=function(){function e(){}return function(n){if(!i(n))return{};if(at)return at(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}(),Zt=(Pe=Object.getPrototypeOf,ae=Object,function(e){return Pe(ae(e))});var Pe,ae,Ue=Object.prototype;const fe=function(e){var n=e&&e.constructor;return e===(typeof n=="function"&&n.prototype||Ue)},Kt=function(e){return e!=null&&typeof e=="object"},De=function(e){return Kt(e)&&L(e)=="[object Arguments]"};var He=Object.prototype,yn=He.hasOwnProperty,bn=He.propertyIsEnumerable;const Te=De(function(){return arguments}())?De:function(e){return Kt(e)&&yn.call(e,"callee")&&!bn.call(e,"callee")},Vt=Array.isArray,qe=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Ee=function(e){return e!=null&&qe(e.length)&&!s(e)};var Be=H&&!H.nodeType&&H,he=Be&&!0&&b&&!b.nodeType&&b,ge=he&&he.exports===Be?u.Buffer:void 0;const It=(ge?ge.isBuffer:void 0)||function(){return!1};var We=Function.prototype,me=Object.prototype,ye=We.toString,vn=me.hasOwnProperty,wn=ye.call(Object),ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1;var Ge=H&&!H.nodeType&&H,Yt=Ge&&!0&&b&&!b.nodeType&&b,At=Yt&&Yt.exports===Ge&&z.process,be=function(){try{return Yt&&Yt.require&&Yt.require("util").types||At&&At.binding&&At.binding("util")}catch{}}(),ve=be&&be.isTypedArray;const Je=ve?function(e){return function(n){return e(n)}}(ve):function(e){return Kt(e)&&qe(e.length)&&!!ot[L(e)]},Fe=function(e,n){if((n!=="constructor"||typeof e[n]!="function")&&n!="__proto__")return e[n]};var _n=Object.prototype.hasOwnProperty;const Ze=function(e,n,t){var r=e[n];_n.call(e,n)&&c(r,t)&&(t!==void 0||n in e)||St(e,n,t)};var $e=/^(?:0|[1-9]\d*)$/;const wt=function(e,n){var t=typeof e;return!!(n=n==null?9007199254740991:n)&&(t=="number"||t!="symbol"&&$e.test(e))&&e>-1&&e%1==0&&e<n};var Ke=Object.prototype.hasOwnProperty;const kt=function(e,n){var t=Vt(e),r=!t&&Te(e),a=!t&&!r&&It(e),d=!t&&!r&&!a&&Je(e),p=t||r||a||d,v=p?function(dt,U){for(var q=-1,K=Array(dt);++q<dt;)K[q]=U(q);return K}(e.length,String):[],S=v.length;for(var A in e)!n&&!Ke.call(e,A)||p&&(A=="length"||a&&(A=="offset"||A=="parent")||d&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||wt(A,S))||v.push(A);return v};var Ve=Object.prototype.hasOwnProperty;const Le=function(e){if(!i(e))return function(a){var d=[];if(a!=null)for(var p in Object(a))d.push(p);return d}(e);var n=fe(e),t=[];for(var r in e)(r!="constructor"||!n&&Ve.call(e,r))&&t.push(r);return t},we=function(e){return Ee(e)?kt(e,!0):Le(e)},Ye=function(e){return function(n,t,r,a){var d=!r;r||(r={});for(var p=-1,v=t.length;++p<v;){var S=t[p],A=a?a(r[S],n[S],S,r,n):void 0;A===void 0&&(A=n[S]),d?St(r,S,A):Ze(r,S,A)}return r}(e,we(e))},Ie=function(e,n,t,r,a,d,p){var v,S=Fe(e,t),A=Fe(n,t),dt=p.get(A);if(dt)Lt(e,t,dt);else{var U=d?d(S,A,t+"",e,n,p):void 0,q=U===void 0;if(q){var K=Vt(A),nt=!K&&It(A),mt=!K&&!nt&&Je(A);U=A,K||nt||mt?Vt(S)?U=S:Kt(v=S)&&Ee(v)?U=function(lt,Ot){var Et=-1,oe=lt.length;for(Ot||(Ot=Array(oe));++Et<oe;)Ot[Et]=lt[Et];return Ot}(S):nt?(q=!1,U=function(lt,Ot){if(Ot)return lt.slice();var Et=lt.length,oe=P?P(Et):new lt.constructor(Et);return lt.copy(oe),oe}(A,!0)):mt?(q=!1,U=T(A,!0)):U=[]:function(lt){if(!Kt(lt)||L(lt)!="[object Object]")return!1;var Ot=Zt(lt);if(Ot===null)return!0;var Et=vn.call(Ot,"constructor")&&Ot.constructor;return typeof Et=="function"&&Et instanceof Et&&ye.call(Et)==wn}(A)||Te(A)?(U=S,Te(S)?U=Ye(S):i(S)&&!s(S)||(U=function(lt){return typeof lt.constructor!="function"||fe(lt)?{}:st(Zt(lt))}(A))):q=!1}q&&(p.set(A,U),a(U,A,r,d,p),p.delete(A)),Lt(e,t,U)}},Xe=function e(n,t,r,a,d){n!==t&&$t(t,function(p,v){if(d||(d=new gt),i(p))Ie(n,t,v,r,e,a,d);else{var S=a?a(Fe(n,v),p,v+"",n,t,d):void 0;S===void 0&&(S=p),Lt(n,v,S)}},we)},Bt=function(e){return e},Xt=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)};var _e=Math.max;const ze=rt?function(e,n){return rt(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:Bt;var Qt=Date.now;const xe=function(e){var n=0,t=0;return function(){var r=Qt(),a=16-(r-t);if(t=r,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(ze),Qe=(te=function(e,n,t){Xe(e,n,t)},function(e,n){return xe(function(t,r,a){return r=_e(r===void 0?t.length-1:r,0),function(){for(var d=arguments,p=-1,v=_e(d.length-r,0),S=Array(v);++p<v;)S[p]=d[r+p];p=-1;for(var A=Array(r+1);++p<r;)A[p]=d[p];return A[r]=a(S),Xt(t,this,A)}}(e,n,Bt),e+"")}(function(e,n){var t=-1,r=n.length,a=r>1?n[r-1]:void 0,d=r>2?n[2]:void 0;for(a=te.length>3&&typeof a=="function"?(r--,a):void 0,d&&function(v,S,A){if(!i(A))return!1;var dt=typeof S;return!!(dt=="number"?Ee(A)&&wt(S,A.length):dt=="string"&&S in A)&&c(A[S],v)}(n[0],n[1],d)&&(a=r<3?void 0:a,r=1),e=Object(e);++t<r;){var p=n[t];p&&te(e,p,t)}return e}));var te,ke=function(){return(ke=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function Me(e){return e.toLowerCase()}var se=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ee=/[^A-Z0-9]+/gi;function Wt(e,n,t){return n instanceof RegExp?e.replace(n,t):n.reduce(function(r,a){return r.replace(a,t)},e)}const Re=navigator.platform.toLowerCase()==="win32"?y.win32:y.posix,ce=function(e,n){return n===void 0&&(n={}),function(t,r){return r===void 0&&(r={}),function(a,d){d===void 0&&(d={});for(var p=d.splitRegexp,v=p===void 0?se:p,S=d.stripRegexp,A=S===void 0?ee:S,dt=d.transform,U=dt===void 0?Me:dt,q=d.delimiter,K=q===void 0?" ":q,nt=Wt(Wt(a,v,"$1\0$2"),A,"\0"),mt=0,lt=nt.length;nt.charAt(mt)==="\0";)mt++;for(;nt.charAt(lt-1)==="\0";)lt--;return nt.slice(mt,lt).split("\0").map(U).join(K)}(t,ke({delimiter:"."},r))}(e,ke({delimiter:"_"},n))},tn=Qe;function le(e,n){let t,r,a=!1;const d=v=>S=>{e&&clearTimeout(e),v(S),a=!0},p=new Promise((v,S)=>{t=d(v),r=d(S),e&&(e=setTimeout(()=>r(new Error(`[deferred timeout] ${n}`)),e))});return{created:Date.now(),setTag:v=>n=v,resolve:t,reject:r,promise:p,get settled(){return a}}}var en=F(227),Ce=F.n(en);const zt="application/x-postmate-v1+json";let Dt=0;const Se={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},je=(e,n)=>!(typeof n=="string"&&e.origin!==n||!e.data||typeof e.data=="object"&&!("postmate"in e.data)||e.data.type!==zt||!Se[e.data.postmate]);class ne{constructor(n){D(this,"parent");D(this,"frame");D(this,"child");D(this,"events",{});D(this,"childOrigin");D(this,"listener");this.parent=n.parent,this.frame=n.frame,this.child=n.child,this.childOrigin=n.childOrigin,this.listener=t=>{if(!je(t,this.childOrigin))return!1;const{data:r,name:a}=((t||{}).data||{}).value||{};t.data.postmate==="emit"&&a in this.events&&this.events[a].forEach(d=>{d.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(n){return new Promise(t=>{const r=++Dt,a=d=>{d.data.uid===r&&d.data.postmate==="reply"&&(this.parent.removeEventListener("message",a,!1),t(d.data.value))};this.parent.addEventListener("message",a,!1),this.child.postMessage({postmate:"request",type:zt,property:n,uid:r},this.childOrigin)})}call(n,t){this.child.postMessage({postmate:"call",type:zt,property:n,data:t},this.childOrigin)}on(n,t){this.events[n]||(this.events[n]=[]),this.events[n].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class xn{constructor(n){D(this,"model");D(this,"parent");D(this,"parentOrigin");D(this,"child");this.model=n.model,this.parent=n.parent,this.parentOrigin=n.parentOrigin,this.child=n.child,this.child.addEventListener("message",t=>{if(!je(t,this.parentOrigin))return;const{property:r,uid:a,data:d}=t.data;t.data.postmate!=="call"?((p,v)=>{const S=typeof p[v]=="function"?p[v]():p[v];return Promise.resolve(S)})(this.model,r).then(p=>{t.source.postMessage({property:r,postmate:"reply",type:zt,uid:a,value:p},t.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](d)})}emit(n,t){this.parent.postMessage({postmate:"emit",type:zt,value:{name:n,data:t}},this.parentOrigin)}}class ue{constructor(n){D(this,"container");D(this,"parent");D(this,"frame");D(this,"child");D(this,"childOrigin");D(this,"url");D(this,"model");this.container=n.container,this.url=n.url,this.parent=window,this.frame=document.createElement("iframe"),n.id&&(this.frame.id=n.id),n.name&&(this.frame.name=n.name),this.frame.classList.add.apply(this.frame.classList,n.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=n.model||{}}sendHandshake(n){const t=(d=>{const p=document.createElement("a");p.href=d;const v=p.protocol.length>4?p.protocol:window.location.protocol,S=p.host.length?p.port==="80"||p.port==="443"?p.hostname:p.host:window.location.host;return p.origin||`${v}//${S}`})(n=n||this.url);let r,a=0;return new Promise((d,p)=>{const v=A=>!!je(A,t)&&(A.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",v,!1),this.childOrigin=A.origin,d(new ne(this))):p("Failed handshake"));this.parent.addEventListener("message",v,!1);const S=()=>{a++,this.child.postMessage({postmate:"handshake",type:zt,model:this.model},t),a===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{S(),r=setInterval(S,500)}),this.frame.src=n})}}D(ue,"debug",!1),D(ue,"Model");class nn{constructor(n){D(this,"child");D(this,"model");D(this,"parent");D(this,"parentOrigin");this.child=window,this.model=n,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((n,t)=>{const r=a=>{if(a.data.postmate){if(a.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),a.source.postMessage({postmate:"handshake-reply",type:zt},a.origin),this.parentOrigin=a.origin;const d=a.data.model;return d&&Object.keys(d).forEach(p=>{this.model[p]=d[p]}),n(new xn(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}var rn=F(729),re=F.n(rn);const{importHTML:Ne,createSandboxContainer:kn}=window.QSandbox||{};function Mt(e,n){return e.startsWith("http")?fetch(e,n):(e=e.replace("file://",""),new Promise(async(t,r)=>{try{const a=await window.apis.doAction(["readFile",e]);t({text:()=>a})}catch(a){console.error(a),r(a)}}))}class on extends re(){constructor(t){super();D(this,"_pluginLocal");D(this,"_frame");D(this,"_root");D(this,"_loaded",!1);D(this,"_unmountFns",[]);this._pluginLocal=t,t._dispose(()=>{this._unmount()})}async load(){const{name:t,entry:r}=this._pluginLocal.options;if(this.loaded||!r)return;const{template:a,execScripts:d}=await Ne(r,{fetch:Mt});this._mount(a,document.body);const p=kn(t,{elementGetter:()=>{var S;return(S=this._root)==null?void 0:S.firstChild}}).instance.proxy;p.__shadow_mode__=!0,p.LSPluginLocal=this._pluginLocal,p.LSPluginShadow=this,p.LSPluginUser=p.logseq=new Ae(this._pluginLocal.toJSON(),this._pluginLocal.caller);const v=await d(p,!0);this._unmountFns.push(v.unmount),this._loaded=!0}_mount(t,r){const a=this._frame=document.createElement("div");a.classList.add("lsp-shadow-sandbox"),a.id=this._pluginLocal.id,this._root=a.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,r.appendChild(a),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){var t,r;(r=(t=this.frame)==null?void 0:t.parentNode)==null||r.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var t;return(t=this._root)==null?void 0:t.firstChild}get frame(){return this._frame}}const Rt=Ce()("LSPlugin:caller"),de="#await#response#",an="#lspmsg#error#",Ht=e=>`#lspmsg#${e}`;class Nt extends re(){constructor(t){super();D(this,"_pluginLocal");D(this,"_connected",!1);D(this,"_parent");D(this,"_child");D(this,"_shadow");D(this,"_status");D(this,"_userModel",{});D(this,"_call");D(this,"_callUserModel");D(this,"_debugTag","");this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){var dt;if(this._connected)return;const r=this,a=this._pluginLocal!=null;let d=0;const p=new Map,v=le(5e3),S=this._extendUserModel(pn({"#lspmsg#ready#":async U=>{S[Ht(U==null?void 0:U.pid)]=({type:q,payload:K})=>{Rt(`[host (_call) -> *user] ${this._debugTag}`,q,K),r.emit(q,K)},await v.resolve()},"#lspmsg#beforeunload#":async U=>{const q=le(1e4);r.emit("beforeunload",Object.assign({actor:q},U)),await q.promise},"#lspmsg#settings#":async({type:U,payload:q})=>{r.emit("settings:changed",q)},"#lspmsg#":async({ns:U,type:q,payload:K})=>{Rt(`[host (async) -> *user] ${this._debugTag} ns=${U} type=${q}`,K),U&&U.startsWith("hook")?r.emit(`${U}:${q}`,K):r.emit(q,K)},"#lspmsg#reply#":({_sync:U,result:q})=>{if(Rt(`[sync host -> *user] #${U}`,q),p.has(U)){const K=p.get(U);K&&(q!=null&&q.hasOwnProperty(an)?K.reject(q[an]):K.resolve(q),p.delete(U))}}},t));if(a)return await v.promise,JSON.parse(JSON.stringify((dt=this._pluginLocal)==null?void 0:dt.toJSON()));const A=new nn(S).sendHandshakeReply();return this._status="pending",await A.then(U=>{this._child=U,this._connected=!0,this._call=async(q,K={},nt)=>{if(nt){const mt=++d;p.set(mt,nt),K._sync=mt,nt.setTag(`async call #${mt}`),Rt(`async call #${mt}`)}return U.emit(Ht(S.baseInfo.id),{type:q,payload:K}),nt==null?void 0:nt.promise},this._callUserModel=async(q,K)=>{try{S[q](K)}catch{Rt(`[model method] #${q} not existed`)}},setInterval(()=>{if(p.size>100)for(const[q,K]of p)K.settled&&p.delete(q)},18e5)}).finally(()=>{this._status=void 0}),await v.promise,S.baseInfo}async call(t,r={}){var a;return(a=this._call)==null?void 0:a.call(this,t,r)}async callAsync(t,r={}){var d;const a=le(1e4);return(d=this._call)==null?void 0:d.call(this,t,r,a)}async callUserModel(t,r={}){var a;return(a=this._callUserModel)==null?void 0:a.call(this,t,r)}async _setupIframeSandbox(){var dt;const t=this._pluginLocal,r=t.id,a=`${r}_lsp_main`,d=new URL(t.options.entry);d.searchParams.set("__v__",t.options.version);const p=document.querySelector(`#${a}`);p&&p.parentElement.removeChild(p);const v=document.createElement("div");v.classList.add("lsp-iframe-sandbox-container"),v.id=a,v.dataset.pid=r;try{const U=(dt=await this._pluginLocal._loadLayoutsData())==null?void 0:dt.$$0;if(U){v.dataset.inited_layout="true";const{width:q,height:K,left:nt,top:mt}=U;Object.assign(v.style,{width:q+"px",height:K+"px",left:nt+"px",top:mt+"px"})}}catch(U){console.error("[Restore Layout Error]",U)}document.body.appendChild(v);let S,A=new ue({id:r+"_iframe",container:v,url:d.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((U,q)=>{S=setTimeout(()=>{q(new Error("handshake Timeout"))},3e3),A.then(K=>{this._parent=K,this._connected=!0,this.emit("connected"),K.on(Ht(t.id),({type:nt,payload:mt})=>{var lt;Rt("[user -> *host] ",nt,mt),(lt=this._pluginLocal)==null||lt.emit(nt,mt||{})}),this._call=async(...nt)=>{await K.call(Ht(t.id),{type:nt[0],payload:Object.assign(nt[1]||{},{$$pid:t.id})})},this._callUserModel=async(nt,mt)=>{if(nt.startsWith(de))return await K.get(nt.replace(de,""));K.call(nt,mt)},U(null)}).catch(K=>{q(K)}).finally(()=>{clearTimeout(S)})}).catch(U=>{throw Rt("[iframe sandbox] error",U),U}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const t=this._pluginLocal,r=this._shadow=new on(t);try{this._status="pending",await r.load(),this._connected=!0,this.emit("connected"),this._call=async(a,d={},p)=>{var v;return p&&(d.actor=p),(v=this._pluginLocal)==null||v.emit(a,Object.assign(d,{$$pid:t.id})),p==null?void 0:p.promise},this._callUserModel=async(...a)=>{let d=a[0];d!=null&&d.startsWith(de)&&(d=d.replace(de,""));const p=a[1]||{},v=this._userModel[d];typeof v=="function"&&await v.call(null,p)}}catch(a){throw Rt("[shadow sandbox] error",a),a}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){var t;return(t=this._parent)==null?void 0:t.frame.parentNode}_getSandboxShadowContainer(){var t;return(t=this._shadow)==null?void 0:t.frame.parentNode}_getSandboxIframeRoot(){var t;return(t=this._parent)==null?void 0:t.frame}_getSandboxShadowRoot(){var t;return(t=this._shadow)==null?void 0:t.frame}set debugTag(t){this._debugTag=t}async destroy(){let t=null;this._parent&&(t=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(t=this._getSandboxShadowContainer(),this._shadow.destroy()),t==null||t.parentNode.removeChild(t)}}class sn{constructor(n){D(this,"ctx");this.ctx=n}get ctxId(){return this.ctx.baseInfo.id}setItem(n,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,n,t]})}getItem(n){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,n]})}removeItem(n){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,n]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(n){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,n]})}}class cn{constructor(n){D(this,"ctx");this.ctx=n}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(n,...t){var a,d;const r=this.ensureHostScope();return n=(a=ce(n))==null?void 0:a.toLowerCase(),(d=r.logseq.api["exper_"+n])==null?void 0:d.apply(r,t)}async loadScripts(...n){(n=n.map(t=>t!=null&&t.startsWith("http")?t:this.ctx.resolveResourceFullUrl(t))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...n)}registerFencedCodeRenderer(n,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,n,t)}registerExtensionsEnhancer(n,t){const r=this.ensureHostScope();switch(n){case"katex":r.katex&&t(r.katex).catch(console.error)}return r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,n,t)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const ln=Symbol.for("proxy-continue"),Cn=Ce()("LSPlugin:user");function o(e,n,t){var A;if(typeof t!="function")return!1;const{key:r,label:a,desc:d,palette:p,keybinding:v}=n,S=`SimpleCommandHook${r}${++et}`;this.Editor["on"+S](t),(A=this.caller)==null||A.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:r,label:a,type:e,desc:d,keybinding:v},["editor/hook",S]],p]})}let O=null;const k={async getInfo(e){return O||(O=await this._execCallableAPIAsync("get-app-info")),typeof e=="string"?O[e]:O},registerCommand:o,registerCommandPalette(e,n){const{key:t,label:r,keybinding:a}=e;return o.call(this,"$palette$",{key:t,label:r,palette:!0,keybinding:a},n)},registerCommandShortcut(e,n){const{binding:t}=e,r="$shortcut$",a=r+ce(t);return o.call(this,r,{key:a,palette:!1,keybinding:e},n)},registerUIItem(e,n){var r;const t=this.baseInfo.id;(r=this.caller)==null||r.call("api:call",{method:"register-plugin-ui-item",args:[t,e,n]})},registerPageMenuItem(e,n){if(typeof n!="function")return!1;const t=e+"_"+this.baseInfo.id,r=e;o.call(this,"page-menu-item",{key:t,label:r},n)},setFullScreen(e){const n=(...t)=>this._callWin("setFullScreen",...t);e==="toggle"?this._callWin("isFullScreen").then(t=>{t?n():n(!0)}):e?n(!0):n()}};let et=0;const ct={registerSlashCommand(e,n){var t;Cn("Register slash command #",this.baseInfo.id,e,n),typeof n=="function"&&(n=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",n]]),n=n.map(r=>{const[a,...d]=r;switch(a){case"editor/hook":let p=d[0],v=()=>{var A;(A=this.caller)==null||A.callUserModel(p)};typeof p=="function"&&(v=p);const S=`SlashCommandHook${a}${++et}`;r[1]=S,this.Editor["on"+S](v)}return r}),(t=this.caller)==null||t.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,n]]})},registerBlockContextMenuItem(e,n){if(typeof n!="function")return!1;const t=e+"_"+this.baseInfo.id,r=e;o.call(this,"block-context-menu-item",{key:t,label:r},n)},scrollToBlockInPage(e,n,t){const r="block-content-"+n;t!=null&&t.replaceState?this.App.replaceState("page",{name:e},{anchor:r}):this.App.pushState("page",{name:e},{anchor:r})}},jt={onBlockChanged(e,n){const t=this.baseInfo.id,r=`hook:db:${ce(`block:${e}`)}`,a=({block:d,txData:p,txMeta:v})=>{d.uuid===e&&n(d,p,v)};return this.caller.on(r,a),this.App._installPluginHook(t,r),()=>{this.caller.off(r,a),this.App._uninstallPluginHook(t,r)}}},_t={},Oe={},Tt={};class Ae extends re(){constructor(t,r){super();D(this,"_baseInfo");D(this,"_caller");D(this,"_version","0.0.6");D(this,"_debugTag","");D(this,"_settingsSchema");D(this,"_connected",!1);D(this,"_ui",new Map);D(this,"_mFileStorage");D(this,"_mExperiments");D(this,"_beforeunloadCallback");this._baseInfo=t,this._caller=r,r.on("sys:ui:visible",a=>{a!=null&&a.toggle&&this.toggleMainUI()}),r.on("settings:changed",a=>{const d=Object.assign({},this.settings),p=Object.assign(this._baseInfo.settings,a);this.emit("settings:changed",pn({},p),d)}),r.on("beforeunload",async a=>{const S=a,{actor:d}=S,p=Tn(S,["actor"]),v=this._beforeunloadCallback;try{v&&await v(p),d==null||d.resolve(null)}catch(A){console.debug(`${r.debugTag} [beforeunload] `,A),d==null||d.reject(A)}})}async ready(t,r){if(!this._connected)try{typeof t=="function"&&(r=t,t={});let a=await this._caller.connectToParent(t);this._connected=!0,a=tn(this._baseInfo,a),this._settingsSchema&&(a.settings=function(d,p){const v=(p||[]).reduce((S,A)=>("default"in A&&(S[A.key]=A.default),S),{});return Object.assign(v,d)}(a.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),a!=null&&a.id&&(this._debugTag=this._caller.debugTag=`#${a.id} [${a.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(d){console.warn(d)}r&&r.call(this,a)}catch(a){console.error(`${this._debugTag} [Ready Error]`,a)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){typeof t=="function"&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const r="settings:changed";return this.on(r,t),()=>this.off(r,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const r={key:0,visible:!1,cursor:t==null?void 0:t.restoreEditingCursor};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}showMainUI(t){const r={key:0,visible:!0,autoFocus:t==null?void 0:t.autoFocus};this.caller.call("main-ui:visible",r),this.emit("ui:visible:changed",r),this._ui.set(r.key,r)}toggleMainUI(){const t=this._ui.get(0);t&&t.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return Boolean(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){var t;return(t=this.baseInfo)==null?void 0:t.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),function(r,...a){try{const d=new URL(r);if(!d.origin)throw new Error(null);const p=Re.join(r.substr(d.origin.length),...a);return d.origin+p}catch{return Re.join(r,...a)}}(this._baseInfo.lsr,t)}_makeUserProxy(t,r){const a=this,d=this.caller;return new Proxy(t,{get(p,v,S){const A=p[v];return function(...dt){if(A){const q=A.apply(a,dt.concat(r));if(q!==ln)return q}if(r){const q=v.toString().match(/^(once|off|on)/i);if(q!=null){const K=q[0].toLowerCase(),nt=q.input.slice(K.length),mt=K==="off",lt=a.baseInfo.id,Ot=`hook:${r}:${ce(nt)}`,Et=dt[0];d[K](Ot,Et);const oe=()=>{d.off(Ot,Et),d.listenerCount(Ot)||a.App._uninstallPluginHook(lt,Ot)};return mt?void oe():(a.App._installPluginHook(lt,Ot),oe)}}let U=v;return["git","ui","assets"].includes(r)&&(U=r+"_"+U),d.callAsync("api:call",{tag:r,method:U,args:dt})}}})}_execCallableAPIAsync(t,...r){return this._caller.callAsync("api:call",{method:t,args:r})}_execCallableAPI(t,...r){this._caller.call("api:call",{method:t,args:r})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(k,"app")}get Editor(){return this._makeUserProxy(ct,"editor")}get DB(){return this._makeUserProxy(jt,"db")}get Git(){return this._makeUserProxy(_t,"git")}get UI(){return this._makeUserProxy(Oe,"ui")}get Assets(){return this._makeUserProxy(Tt,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new sn(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new cn(this)),t}}function un(e,n){return new Ae(e,n)}if(window.__LSP__HOST__==null){const e=new Nt(null);window.logseq=un({},e)}})(),V})()})})(En,En.exports);const Fn="[a-fA-F\\d:]",ie=b=>b&&b.includeBoundaries?`(?:(?<=\\s|^)(?=${Fn})|(?<=${Fn})(?=\\s|$))`:"",Pt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",yt="[a-fA-F\\d]{1,4}",hn=`
(?:
(?:${yt}:){7}(?:${yt}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${yt}:){6}(?:${Pt}|:${yt}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${yt}:){5}(?::${Pt}|(?::${yt}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${yt}:){4}(?:(?::${yt}){0,1}:${Pt}|(?::${yt}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${yt}:){3}(?:(?::${yt}){0,2}:${Pt}|(?::${yt}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${yt}:){2}(?:(?::${yt}){0,3}:${Pt}|(?::${yt}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${yt}:){1}(?:(?::${yt}){0,4}:${Pt}|(?::${yt}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${yt}){0,5}:${Pt}|(?::${yt}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),In=new RegExp(`(?:^${Pt}$)|(?:^${hn}$)`),zn=new RegExp(`^${Pt}$`),Mn=new RegExp(`^${hn}$`),jn=b=>b&&b.exact?In:new RegExp(`(?:${ie(b)}${Pt}${ie(b)})|(?:${ie(b)}${hn}${ie(b)})`,"g");jn.v4=b=>b&&b.exact?zn:new RegExp(`${ie(b)}${Pt}${ie(b)}`,"g");jn.v6=b=>b&&b.exact?Mn:new RegExp(`${ie(b)}${hn}${ie(b)}`,"g");var Rn=jn,Nn=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","verm\xF6gensberater","verm\xF6gensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","\u03B5\u03BB","\u03B5\u03C5","\u0431\u0433","\u0431\u0435\u043B","\u0434\u0435\u0442\u0438","\u0435\u044E","\u043A\u0430\u0442\u043E\u043B\u0438\u043A","\u043A\u043E\u043C","\u043C\u043A\u0434","\u043C\u043E\u043D","\u043C\u043E\u0441\u043A\u0432\u0430","\u043E\u043D\u043B\u0430\u0439\u043D","\u043E\u0440\u0433","\u0440\u0443\u0441","\u0440\u0444","\u0441\u0430\u0439\u0442","\u0441\u0440\u0431","\u0443\u043A\u0440","\u049B\u0430\u0437","\u0570\u0561\u0575","\u05D9\u05E9\u05E8\u05D0\u05DC","\u05E7\u05D5\u05DD","\u0627\u0628\u0648\u0638\u0628\u064A","\u0627\u062A\u0635\u0627\u0644\u0627\u062A","\u0627\u0631\u0627\u0645\u0643\u0648","\u0627\u0644\u0627\u0631\u062F\u0646","\u0627\u0644\u0628\u062D\u0631\u064A\u0646","\u0627\u0644\u062C\u0632\u0627\u0626\u0631","\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629","\u0627\u0644\u0639\u0644\u064A\u0627\u0646","\u0627\u0644\u0645\u063A\u0631\u0628","\u0627\u0645\u0627\u0631\u0627\u062A","\u0627\u06CC\u0631\u0627\u0646","\u0628\u0627\u0631\u062A","\u0628\u0627\u0632\u0627\u0631","\u0628\u064A\u062A\u0643","\u0628\u06BE\u0627\u0631\u062A","\u062A\u0648\u0646\u0633","\u0633\u0648\u062F\u0627\u0646","\u0633\u0648\u0631\u064A\u0629","\u0634\u0628\u0643\u0629","\u0639\u0631\u0627\u0642","\u0639\u0631\u0628","\u0639\u0645\u0627\u0646","\u0641\u0644\u0633\u0637\u064A\u0646","\u0642\u0637\u0631","\u0643\u0627\u062B\u0648\u0644\u064A\u0643","\u0643\u0648\u0645","\u0645\u0635\u0631","\u0645\u0644\u064A\u0633\u064A\u0627","\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627","\u0645\u0648\u0642\u0639","\u0647\u0645\u0631\u0627\u0647","\u067E\u0627\u06A9\u0633\u062A\u0627\u0646","\u0680\u0627\u0631\u062A","\u0915\u0949\u092E","\u0928\u0947\u091F","\u092D\u093E\u0930\u0924","\u092D\u093E\u0930\u0924\u092E\u094D","\u092D\u093E\u0930\u094B\u0924","\u0938\u0902\u0917\u0920\u0928","\u09AC\u09BE\u0982\u09B2\u09BE","\u09AD\u09BE\u09B0\u09A4","\u09AD\u09BE\u09F0\u09A4","\u0A2D\u0A3E\u0A30\u0A24","\u0AAD\u0ABE\u0AB0\u0AA4","\u0B2D\u0B3E\u0B30\u0B24","\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE","\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8","\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD","\u0C2D\u0C3E\u0C30\u0C24\u0C4D","\u0CAD\u0CBE\u0CB0\u0CA4","\u0D2D\u0D3E\u0D30\u0D24\u0D02","\u0DBD\u0D82\u0D9A\u0DCF","\u0E04\u0E2D\u0E21","\u0E44\u0E17\u0E22","\u0EA5\u0EB2\u0EA7","\u10D2\u10D4","\u307F\u3093\u306A","\u30A2\u30DE\u30BE\u30F3","\u30AF\u30E9\u30A6\u30C9","\u30B0\u30FC\u30B0\u30EB","\u30B3\u30E0","\u30B9\u30C8\u30A2","\u30BB\u30FC\u30EB","\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3","\u30DD\u30A4\u30F3\u30C8","\u4E16\u754C","\u4E2D\u4FE1","\u4E2D\u56FD","\u4E2D\u570B","\u4E2D\u6587\u7F51","\u4E9A\u9A6C\u900A","\u4F01\u4E1A","\u4F5B\u5C71","\u4FE1\u606F","\u5065\u5EB7","\u516B\u5366","\u516C\u53F8","\u516C\u76CA","\u53F0\u6E7E","\u53F0\u7063","\u5546\u57CE","\u5546\u5E97","\u5546\u6807","\u5609\u91CC","\u5609\u91CC\u5927\u9152\u5E97","\u5728\u7EBF","\u5927\u62FF","\u5929\u4E3B\u6559","\u5A31\u4E50","\u5BB6\u96FB","\u5E7F\u4E1C","\u5FAE\u535A","\u6148\u5584","\u6211\u7231\u4F60","\u624B\u673A","\u62DB\u8058","\u653F\u52A1","\u653F\u5E9C","\u65B0\u52A0\u5761","\u65B0\u95FB","\u65F6\u5C1A","\u66F8\u7C4D","\u673A\u6784","\u6DE1\u9A6C\u9521","\u6E38\u620F","\u6FB3\u9580","\u70B9\u770B","\u79FB\u52A8","\u7EC4\u7EC7\u673A\u6784","\u7F51\u5740","\u7F51\u5E97","\u7F51\u7AD9","\u7F51\u7EDC","\u8054\u901A","\u8BFA\u57FA\u4E9A","\u8C37\u6B4C","\u8D2D\u7269","\u901A\u8CA9","\u96C6\u56E2","\u96FB\u8A0A\u76C8\u79D1","\u98DE\u5229\u6D66","\u98DF\u54C1","\u9910\u5385","\u9999\u683C\u91CC\u62C9","\u9999\u6E2F","\uB2F7\uB137","\uB2F7\uCEF4","\uC0BC\uC131","\uD55C\uAD6D"];const Pn=Rn,Un=Nn;var gn=b=>{b=pn({strict:!0},b);const H=`(?:(?:[a-z]+:)?//)${b.strict?"":"?"}`,B="(?:\\S+(?::\\S*)?@)?",J=Pn.v4().source,F="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",V="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",y=`(?:\\.${b.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${Un.sort((x,$)=>$.length-x.length).join("|")})`})\\.?`,E=`(?:${H}|www\\.)${B}(?:localhost|${J}|${F}${V}${y})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return b.exact?new RegExp(`(?:^${E}$)`,"i"):new RegExp(E,"ig")};async function Dn(b){let H="";const F=(await(await fetch(b)).text()).match(/<title(\s[^>]+)*>([^<]*)<\/title>/);return F!==null&&F.length>1&&F[2]!=null&&(H=F[2].trim()),H===""&&logseq.UI.showMsg(`No title found for ${b}`),H}async function mn(b,H,B,J){const F=await Dn(b);if(F!=""){const{preferredFormat:V}=await logseq.App.getUserConfigs(),y=H.slice(0,B);let c=b;V==="markdown"?c=`[${F}](${b})`:V==="org"&&(c=`[[${b}][${F}]]`);const _=H.slice(B+b.length);H=`${y}${c}${_}`,J=B+b.length}return{text:H,offset:J}}const Hn=async({uuid:b})=>{const{content:H}=await logseq.Editor.getBlock(b);let B=H;const J=B.slice(0).match(gn());let F=0;for(const V of J){const y=B.indexOf(V,F);if(B.slice(y-2,y)!="]("||B.slice(y+V.length,y+V.length+1)!=")"){({text:B,offset:F}=await mn(V,B,y,F)),await logseq.Editor.updateBlock(b,B);return}F=y+V.length}},qn=async({uuid:b})=>{const{content:H}=await logseq.Editor.getBlock(b),{pos:B}=await logseq.Editor.getEditingCursorPosition();let J=H;const F=J.slice(B).match(gn());let V=0;for(const y of F){const c=J.indexOf(y,V);if(J.slice(c-2,c)!="]("||J.slice(c+y.length,c+y.length+1)!=")"){({text:J,offset:V}=await mn(y,J,c,V)),await logseq.Editor.updateBlock(b,J);return}V=c+y.length}},Bn=async({uuid:b})=>{const{content:H}=await logseq.Editor.getBlock(b),{pos:B}=await logseq.Editor.getEditingCursorPosition();let J=H;const F=J.slice(0,B).match(gn());F.reverse();let V=0;for(let y of F){y=y.replace(/\)$/,"");const c=J.lastIndexOf(y);if(J.slice(c-2,c)!="]("||J.slice(c+y.length,c+y.length+1)!=")"){({text:J,offset:V}=await mn(y,J,c,V)),await logseq.Editor.updateBlock(b,J);return}}};function Wn(){logseq.Editor.registerBlockContextMenuItem("Get Link Titles",async({uuid:b})=>{const{content:H}=await logseq.Editor.getBlock(b);let B=H;const J=B.match(gn());let F=0;for(const V of J){const y=B.indexOf(V,F);(B.slice(y-2,y)!="]("||B.slice(y+V.length,y+V.length+1)!=")")&&({text:B,offset:F}=await mn(V,B,y,F))}await logseq.Editor.updateBlock(b,B)}),logseq.Editor.registerSlashCommand("Title",Hn),logseq.Editor.registerSlashCommand("Title After Cursor",qn),logseq.Editor.registerSlashCommand("Title Before Cursor",Bn)}logseq.ready(Wn).catch(console.error);
