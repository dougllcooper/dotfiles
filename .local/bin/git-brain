#!/bin/bash
#
# If you are on linux, replace !/bin/sh with !/bin/bash
#
# Pull before committing
# Credential handling options:
#  - hardcode credentials in URL
#  - use ssh with key auth
#  - https://git-scm.com/docs/git-credential-store
#  - git credential helper on windows

# Redirect output to stderr, uncomment for more output for debugging
# exec 1>&2
cd $HOME/braindump

output=$(git pull --no-rebase)

# Handle non error output as otherwise it gets shown with any exit code by logseq
if [[ "$output" == "Already up to date." ]]; then
   # no ouput
   notify-send "Already up to date. Nothing to do."
   # exit 0
else
   # probably error print it to screen
   echo $output
   notify-send "$output"
fi
status=$(git status -s)

if [[ "$status" == "" ]]; then
	notify-send "Nothing to sync"
	exit 0
fi

git add -A
#!/bin/bash

git commit -m "sync from desktop"

git push origin main
notify-send "Sync complete"

cd
